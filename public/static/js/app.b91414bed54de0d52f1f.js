webpackJsonp([1],{"8tHC":function(e,t){e.exports="data:image/png;base64,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"},EUnl:function(e,t){},MCd0:function(e,t){},NHnr:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s("7+uW"),a={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var i=s("VU/8")({name:"App"},a,!1,function(e){s("oDZh")},null,null).exports,o=s("/ocq"),r={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("nav",{staticClass:"navbar navbar-expand-lg navbar-dark primary-color"},[e.back?s("div",{staticClass:"back-img",on:{click:e.backClicked}},[e._v(" ")]):e._e(),e._v(" "),s("a",{staticClass:"navbar-brand",attrs:{href:"#"}},[e._v("PWA - CHAT")]),e._v(" "),s("a",{staticClass:"nav-item whitecolor",attrs:{href:"#"}},[e._v(e._s(e.userName))])])},staticRenderFns:[]};var c=s("VU/8")({name:"Navbar",props:["defaultback"],data:function(){return{back:!1,userName:""}},mounted:function(){this.back=this.defaultback||!1},methods:{backClicked:function(){this.$emit("back")},nearby:function(){this.$router.push("nearby")},backVisible:function(e){this.back=e},setUser:function(e){this.userName=e}}},r,!1,function(e){s("pyZx")},"data-v-4340e934",null).exports,l=s("mvHQ"),u=s.n(l),d=s("Zrlr"),g=s.n(d),v=s("wxAW"),h=s.n(v),m=function(){function e(){if(g()(this,e),e.inst)throw Error("HttpService use singleton pattern, acces via HttpService.instance() !");this.data={},this.msgArrivedCallback=null,this.locationStr=null,this.recentMessages={},this.updateLocation()}return h()(e,[{key:"getMessages",value:function(e){return this.data.messages[e]?this.data.messages[e]:{user:"",messages:[]}}},{key:"bindMessages",value:function(e,t){var s=this,n=this.msgid(e,this.userId);$.get({dataType:"json",cache:!1,url:"messages/"+n,success:function(e){if(e.ok){for(var a=[],i=e.messages.length-p,o=0;o<e.messages.length;o++)e.messages[o]&&(e.messages[o].receive=e.messages[o].sender!=s.userId,t.push(e.messages[o]),i<o&&a.push(e.messages[o]));s.recentMessages[n]=a,s.storeRecentMessages(a,n)}},error:function(){console.log("Offline működés!"),s.loadFromDb({error:function(){console.error("Cannot load offline data")},success:function(e){for(var s=0;s<e.messages.length;s++)t.push(e.messages[s])},store:"recentMessages",keyValue:n})}})}},{key:"sendMessage",value:function(e,t){var s=this,n={txt:t,sender:this.userId,location:s.locationName(),time:(new Date).toISOString()};if(e&&this.userId){var a=this.msgid(e,this.userId);$.post({dataType:"json",cache:!1,url:"messages/"+a,contentType:"application/json; charset=utf-8",data:u()({msg:n}),success:function(){var e=s.recentMessages[a];e&&Array.isArray(e)&&(e.shift(),e.push(n),s.storeRecentMessages(e,a))},error:function(){n.messageId=a,s.saveToDb({store:"messagesToSend",data:n}),navigator.serviceWorker.ready.then(function(e){return e.sync.register("unSentMessages")})}})}else console.error("sendMessage msgID error, [receiverId,SenderId] => ",e,this.userId)}},{key:"msgid",value:function(e,t){return e<t?e+"_"+t:t+"_"+e}},{key:"messageArrived",value:function(e){this.msgArrivedCallback&&this.msgArrivedCallback(e);var t=this.recentMessages[e.sender];t&&Array.isArray(t)&&(t.shift(),t.push(e),this.storeRecentMessages(t,e.sender))}},{key:"subscribeForMessages",value:function(e){this.msgArrivedCallback=e}},{key:"storeRecentMessages",value:function(e,t){this.saveToDb({store:"recentMessages",data:{messageId:t,messages:e,time:(new Date).getTime()},update:1})}},{key:"pollServer",value:function(){var e=this,t=0;navigator&&!navigator.onLine&&(t=1e3),window.setTimeout(function(){$.ajax({url:"messages/polling/"+e.userId,method:"GET",cache:!1,success:function(t){t&&t.sender&&t.txt&&t.sender!=e.userId&&e.messageArrived(t),e.pollServer()},error:function(){console.error("pollserver Errored"),e.pollServer()}})},t)}},{key:"logIn",value:function(e,t,s,n){var a=this;this.userName=e,fetch("auth/login",{method:"post",body:u()({user:e,pass:t}),headers:{"content-type":"application/json"},cache:"no-cache"}).then(function(e){return e.json()}).then(function(e){a.userId=e.id,a.logged=!0,s(),a.pollServer(),a.registerPush(),a.requestNotificationPermission(),localStorage.setItem("salt",e.salt),localStorage.setItem("userid",e.id),localStorage.setItem("auth",md5(sha256.pbkdf2(t,e.salt,1e3,32)))}).catch(function(e){navigator&&!navigator.onLine&&localStorage&&localStorage.getItem("salt")&&localStorage.getItem("auth")&&md5(sha256.pbkdf2(t,localStorage.getItem("salt"),1e3,32))==localStorage.getItem("auth")?(a.userId=localStorage.getItem("userid"),a.logged=!0,s(),a.requestNotificationPermission(),a.pollServer(),a.registerPush()):(a.userName=null,n?n():console.error("Offline load fail"))})}},{key:"signUp",value:function(e,t,s,n){this.userName=e;var a=this;$.post({dataType:"json",url:"auth/register",data:{user:e,pass:t},success:function(){a.logged=!0,s()},error:function(e){a.userName=null,n(e)}})}},{key:"logOut",value:function(){this.logged=!1}},{key:"loggedIn",value:function(){return!("undefined"==typeof dev||!dev)||this.logged}},{key:"getUserNameById",value:function(e){if(this.users&&this.users[e])return this.users[e].user}},{key:"bindUsers",value:function(e){var t=this;$.get({dataType:"json",cache:!1,url:"users",success:function(s){t.users=s;var n=null;for(var a in s)a==t.userId?n={id:a,name:s[a].user}:e.push({id:a,name:s[a].user});n&&e.push(n),t.saveToDb({store:"offlineUsers",data:{id:1,users:e,time:(new Date).getTime()},update:1})},error:function(){t.loadFromDb({error:function(){console.error("Cannot load offline data")},success:function(t){for(var s=0;s<t.users.length;s++)e.push(t.users[s])},store:"offlineUsers",keyValue:1})}})}},{key:"getUserName",value:function(){return this.userName||""}},{key:"loadFromDb",value:function(e){var t=window.indexedDB.open("db",window.DBVERSION);t.onsuccess=function(t){var s=t.target.result.transaction(e.store,"readwrite").objectStore(e.store);if(e.keyValue){s.get(e.keyValue).onsuccess=function(t){e.success(t.target.result)}}else{var n=[];s.openCursor().onsuccess=function(t){var s=t.target.result;s?(n.push(s.value),s.continue()):e.success(n)}}},t.onerror=function(){e.error()}}},{key:"saveToDb",value:function(e){window.indexedDB.open("db",window.DBVERSION).onsuccess=function(t){var s=t.target.result.transaction(e.store,"readwrite").objectStore(e.store);if(e.update)var n=s.put(e.data);else n=s.add(e.data);n.onsuccess=function(e){console.log("Sikeres adat mentés!")},n.onerror=function(e){console.error(e)}}}},{key:"myLocation",value:function(e){navigator.geolocation?navigator.geolocation.getCurrentPosition(e):e(!1)}},{key:"locationName",value:function(){return this.locationStr}},{key:"updateLocation",value:function(){var e=this;if(!this.locationTimer&&navigator.geolocation){var t=function(){e.myLocation(function(t){var s=new google.maps.Geocoder,n=new google.maps.LatLng(t.coords.latitude,t.coords.longitude);s.geocode({latLng:n},function(t,s){if(s==google.maps.GeocoderStatus.OK){var n,a=(n=t.length>1?t[1]:t[0]).address_components[3].long_name+", "+n.address_components[2].long_name;console.log("Location updated!",a),e.locationStr=a}})})};this.locationTimer=setInterval(t,6e5),setTimeout(function(){t()},1e3)}}},{key:"registerPush",value:function(){var e=this,t=setInterval(function(){if(window.registration){console.log("registerpush"),clearInterval(t);window.registration.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:urlBase64ToUint8Array("BExzC1HY_R6awc0BBYNLsVtJyWitteGMLqhA-f563Fs4yUWEP2JBRy4HSCiWciB1tPRRg9nKHdtxyGInOKPwqFw")}).then(function(t){fetch("push/"+e.userId,{method:"POST",body:u()(t),headers:{"content-type":"application/json"}})})}},1e3)}},{key:"requestNotificationPermission",value:function(){"granted"!=Notification.permission&&Notification.requestPermission(function(e){console.log("Notification permission status:",e)})}},{key:"showMsgNotification",value:function(e){var t=this.getUserNameById(e.sender),s=this.msgid(e.sender,this.userId),n={body:e.txt.length>20?e.txt.substr(0,17)+"...":e.txt,icon:"https://pwachat.ddns.net/static/img/icon192.png",tag:"messageArrived",data:{messageId:s}},a=t+" üzenetet küldött!";navigator.serviceWorker.ready.then(function(e){return e.showNotification(a,n)})}}],[{key:"instance",value:function(){return e.inst||(e.inst=new e),e.inst}}]),e}(),f=m;m.instance();var p=10,A=f.instance(),w={name:"Contact",props:["name","id","current"],data:function(){return{myUserId:A.userId}}},C={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"contact-container waves-effect  ",class:{user_me:e.myUserId==e.id,currentUser:e.current}},[n("img",{staticClass:"contact-image",attrs:{src:s("8tHC")}}),e._v(" "),n("div",{staticClass:"contact-details"},[n("div",{staticClass:"contact-name"},[e._v(e._s(e.name))]),e._v(" "),n("div",{staticClass:"contact-descr"},[e._v("...")])])])},staticRenderFns:[]};var b=s("VU/8")(w,C,!1,function(e){s("uvX/")},"data-v-2c793117",null).exports,y=f.instance(),k={name:"Users",components:{Contact:b},data:function(){return{searchFilter:"",selectedUserId:!1,users:[]}},mounted:function(){y.bindUsers(this.users)},methods:{userSelected:function(e){this.selectedUserId=e,this.$emit("userSelected",e)}},computed:{filteredUsers:function(){var e=this.searchFilter;return this.users.filter(function(t){return 0===t.name.indexOf(e)})}}},I={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"search-container"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.searchFilter,expression:"searchFilter"}],staticClass:"form-control mr-sm-2 waves-effect",attrs:{type:"text",placeholder:"Search","aria-label":"Search"},domProps:{value:e.searchFilter},on:{input:function(t){t.target.composing||(e.searchFilter=t.target.value)}}})]),e._v(" "),e._l(e.filteredUsers,function(t){return s("div",[s("Contact",{attrs:{name:t.name,current:t.id==e.selectedUserId,id:t.id},nativeOn:{click:function(s){e.userSelected(t.id)}}})],1)})],2)},staticRenderFns:[]};var U=s("VU/8")(k,I,!1,function(e){s("kRkP")},"data-v-600d6494",null).exports,B=s("qUhW"),x=s.n(B),S={name:"Message",props:["message","last"],methods:{showDetails:function(){console.log("aa");var e=this.$refs.details;e&&(e.style.display="block")},beautifyTime:function(e){if(!e)return"";var t=new Date(e);return this.isToday(t)?t.toLocaleTimeString():t.toLocaleString()},isToday:function(e){return e.toDateString()==(new Date).toDateString()}}},_={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"message-item-conatainer",on:{click:function(t){e.showDetails()}}},[e.message.receive?s("div",{staticClass:"message-item incoming-message-item "},[s("div",{staticClass:"incoming-msg"},[e._v(e._s(e.message.txt))]),e.message.location?s("div",{ref:"details",staticClass:"message-receive-location"},[e._v(e._s(e.message.location)+" "+e._s(e.beautifyTime(e.message.time)))]):e._e()]):e._e(),e._v(" "),e.message.receive?e._e():s("div",{staticClass:"message-item outgoing-message-item"},[e._v(e._s(e.message.txt))])])},staticRenderFns:[]};var N=s("VU/8")(S,_,!1,function(e){s("QQlh")},"data-v-14560419",null).exports,E=f.instance(),Q={name:"ChatWall",components:{Message:N},data:function(){return{messages:[],user:null,userId:null}},methods:{showMessages:function(e){this.userId=e,this.messages=[],this.user=E.getUserNameById(e),E.bindMessages(e,this.messages),this.scrolldown()},txtTyped:function(e){if(13==e.keyCode&&"Enter"==e.key){if(e.shiftKey)return;var t=this.$refs.txtinput.textContent;if(this.$refs.txtinput.textContent="",""===t.trim())return;this.messages.push({receive:0,time:(new Date).toISOString(),txt:t}),this.scrolldown(),E.sendMessage(this.userId,t)}},msgArrived:function(e){this.messages.push(e),this.scrolldown()},scrolldown:function(){setTimeout(function(){var e=document.getElementById("messages-container");e&&(e.scrollTop=e.scrollHeight)},200)},focusOnText:function(){var e=$("#msginput").get()[0];if(e.focus(),void 0!==window.getSelection&&void 0!==document.createRange){var t=document.createRange();t.selectNodeContents(e),t.collapse(!1);var s=window.getSelection();s.removeAllRanges(),s.addRange(t)}else if(void 0!==document.body.createTextRange){var n=document.body.createTextRange();n.moveToElementText(e),n.collapse(!1),n.select()}},speechToText:function(){var e=this.$refs.txtinput,t=new window.SpeechRecognition;t.lang="hu",$("#speech-rec").addClass("speech-recognition-active");var s=this,n=function(){$("#speech-rec").removeClass("speech-recognition-active"),s.focusOnText()};t.onresult=function(t){var s=t.results[0][0].transcript;e.textContent+=" "+s,n()},t.onerror=function(e){n()},t.onnomatch=function(e){console.log("No match"),n()},t.start()}},created:function(){this.scrolldown()},mounted:function(){var e=this.$refs.txtinput,t=this;$(".emojipicker").lsxEmojiPicker({twemoji:!0,onSelect:function(s){for(var n=s.value.split(";"),a=0;a<n.length;a++)e.textContent+=x()(n[a].replace("&#","0"));console.log(s),t.focusOnText()}})}},D={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"chat-wall"},[s("div",{staticClass:"user-header"},[e._v("\n    "+e._s(e.user)+"\n  ")]),e._v(" "),s("div",{staticClass:"messages-container scrollbar scrollbar-primary",attrs:{id:"messages-container"}},[e._l(e.messages,function(t,n){return null!=e.user?s("div",[s("Message",{attrs:{message:t,last:n==e.messages.length-1}})],1):e._e()}),e._v(" "),null==e.user?s("div",[s("div",{staticClass:"emptychatwall"},[e._v("Válasszon Felhasználót")])]):e._e()],2),e._v(" "),s("div",{staticClass:"message-input-container"},[s("div",{ref:"txtinput",staticClass:"msg-input scrollbar scrollbar-primary",attrs:{id:"msginput",contenteditable:"true",placeholder:"Enter text here..."},on:{keyup:e.txtTyped}}),e._v(" "),s("div",{staticClass:"extra-features"},[s("button",{staticClass:" msg-icons emojipicker"},[e._v("\n        😄\n      ")]),e._v(" "),s("div",{staticClass:"speech-recognition",attrs:{id:"speech-rec"},on:{click:function(t){e.speechToText()}}})])])])},staticRenderFns:[]};var T=s("VU/8")(Q,D,!1,function(e){s("MCd0")},"data-v-24e83468",null).exports,P=f.instance(),M={components:{ChatWall:T,Users:U,Navbar:c},data:function(){return{currentUserId:!1}},methods:{updateChatWall:function(e){this.currentUserId=e,this.$refs.cw.showMessages(e),window.matchMedia("screen and (max-width: 728px)").matches?this.mobileShowChat():(this.backVisible(!1),$("#chatwall").is(":visible")||$("#chatwall").show())},mobileShowChat:function(){$("#userswall").hide(),$("#chatwall").hide().show("slide",{direction:"right"},500),this.backVisible(!0)},mobileShowUsers:function(){$("#chatwall").hide(),$("#userswall").show("slide",{direction:"left"},500),this.backVisible(!1)},backClicked:function(){this.mobileShowUsers()},backVisible:function(e){this.$refs.navbar.backVisible(e)},msgArrived:function(e){e.sender==this.currentUserId?(e.receive=1,this.$refs.cw.msgArrived(e)):P.showMsgNotification(e)},nearby:function(){this.$router.push("nearby")}},created:function(){P.loggedIn()||this.$router.push("login"),P.subscribeForMessages(this.msgArrived)},mounted:function(){this.$refs.navbar.setUser(P.getUserName())}},F={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"onepage"},[t("navbar",{ref:"navbar",on:{back:this.backClicked}}),this._v(" "),t("div",{staticClass:"home-container"},[t("div",{staticClass:"left-side scrollbar scrollbar-primary",attrs:{id:"userswall"}},[t("users",{on:{userSelected:this.updateChatWall}})],1),this._v(" "),t("div",{staticClass:"right-side",attrs:{id:"chatwall"}},[t("chat-wall",{ref:"cw"})],1)])],1)},staticRenderFns:[]};var L=s("VU/8")(M,F,!1,function(e){s("EUnl")},"data-v-399330f8",null).exports,j=f.instance(),O={name:"Login",data:function(){return{loginUser:"",loginPass:"",signupUser:"",signupPass:"",signupPassAgain:""}},mounted:function(){if(setTimeout(function(){$("#autologintext").html("Mindjárt kész!")},500),!navigator.credentials)return console.log("credentails api not available"),void $("#login").show();var e=this.back;console.log("Login credentials"),navigator.credentials.get({password:!0}).then(function(t){if(console.log("Login credentials 2"),!t)return $("#login").show(),void $(".autologin-container").hide();j.logIn(t.id,t.password,e,function(){$(".autologin-container").hide(),$("#login").show()})})},methods:{login:function(){j.logIn(this.loginUser,this.loginPass,this.back)},signup:function(){this.signupPassAgain==this.signupPass?j.signUp(this.signupUser,this.signupPass,this.back):alert("A két jelszó nem egyezik!")},switchLogin:function(){$("#login").is(":visible")?($("#login").hide(),$("#signup").show()):($("#signup").hide(),$("#login").show())},back:function(){this.$router.push("/")}}},R={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"login-container"},[e._m(0),e._v(" "),s("div",{staticClass:"card mx-xl-5",attrs:{id:"login"}},[s("div",{staticClass:"card-body"},[e._m(1),e._v(" "),s("label",{staticClass:"grey-text font-weight-light"},[e._v("Your Name")]),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.loginUser,expression:"loginUser"}],staticClass:"form-control",attrs:{type:"text",id:"loginUser"},domProps:{value:e.loginUser},on:{input:function(t){t.target.composing||(e.loginUser=t.target.value)}}}),e._v(" "),s("br"),e._v(" "),s("label",{staticClass:"grey-text font-weight-light"},[e._v("Your password")]),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.loginPass,expression:"loginPass"}],staticClass:"form-control",attrs:{type:"password",id:"loginPass"},domProps:{value:e.loginPass},on:{input:function(t){t.target.composing||(e.loginPass=t.target.value)}}}),e._v(" "),s("div",{staticClass:"text-center mt-4"},[s("button",{staticClass:"btn btn-primary waves-effect waves-light",attrs:{id:"loginbtn"},on:{click:e.login}},[e._v("Login")])])]),e._v(" "),s("div",{staticClass:"modal-footer"},[s("div",{staticClass:"options font-weight-light"},[s("p",[e._v("Not a member? "),s("span",{staticClass:"switchLogin",on:{click:e.switchLogin}},[e._v("Sign Up")])])])])]),e._v(" "),s("div",{staticClass:"card mx-xl-5",attrs:{id:"signup"}},[s("div",{staticClass:"card-body"},[e._m(2),e._v(" "),s("label",{staticClass:"grey-text font-weight-light"},[e._v("Your Name")]),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.signupUser,expression:"signupUser"}],staticClass:"form-control",attrs:{type:"text",id:"signupUser"},domProps:{value:e.signupUser},on:{input:function(t){t.target.composing||(e.signupUser=t.target.value)}}}),e._v(" "),s("br"),e._v(" "),s("label",{staticClass:"grey-text font-weight-light"},[e._v("Your password")]),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.signupPass,expression:"signupPass"}],staticClass:"form-control",attrs:{type:"password",id:"signupPass"},domProps:{value:e.signupPass},on:{input:function(t){t.target.composing||(e.signupPass=t.target.value)}}}),e._v(" "),s("br"),e._v(" "),s("label",{staticClass:"grey-text font-weight-light"},[e._v("Your password again")]),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.signupPassAgain,expression:"signupPassAgain"}],staticClass:"form-control",attrs:{type:"password",id:"signupPassAgain"},domProps:{value:e.signupPassAgain},on:{input:function(t){t.target.composing||(e.signupPassAgain=t.target.value)}}}),e._v(" "),s("div",{staticClass:"text-center mt-4"},[s("button",{staticClass:"btn btn-primary waves-effect waves-light",on:{click:e.signup}},[e._v("Sign Up")])])]),e._v(" "),s("div",{staticClass:"modal-footer"},[s("div",{staticClass:"options font-weight-light"},[s("p",[e._v("Already a member? "),s("span",{staticClass:"switchLogin",on:{click:e.switchLogin}},[e._v("Login")])])])])])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"autologin-container"},[t("img",{attrs:{clsas:"autologinicon",src:"static/img/icon192.png"}}),this._v(" "),t("div",{staticClass:"autologin-loading"}),this._v(" "),t("div",{staticClass:"autologin-text",attrs:{id:"autologintext"}},[this._v("Adatok betöltése!")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"form-header login-label rounded"},[t("h3",[this._v("Login")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"form-header login-label rounded"},[t("h3",[this._v("Sign Up")])])}]};var W=s("VU/8")(O,R,!1,function(e){s("Yq37")},"data-v-98aa98dc",null).exports;var H=f.instance(),V={components:{Navbar:c},name:"NearBy",mounted:function(){"undefined"!=typeof mapsloaded&&navigator&&navigator.onLine?H.myLocation(this.locationCB):$("#offlinemap").show()},methods:{locationCB:function(e){if(e){var t,s={lat:e.coords.latitude,lng:e.coords.longitude};t=new google.maps.Map(document.getElementById("map"),{center:s,zoom:8});new google.maps.Marker({position:s,map:t})}},backClicked:function(){this.$router.back()}}},X={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"nearby"},[t("navbar",{attrs:{defaultback:!0},on:{back:this.backClicked}}),this._v(" "),t("div",{staticClass:"offlinemap",attrs:{id:"offlinemap"}},[this._v("A Térkép csak online érhető el!")]),this._v(" "),t("div",{staticClass:"mapcontainer",attrs:{id:"map"}})],1)},staticRenderFns:[]};var z=s("VU/8")(V,X,!1,function(e){s("kOQf")},"data-v-0bd1ba3e",null).exports;n.a.use(o.a);var K=new o.a({routes:[{path:"/",name:"HomePage",component:L},{path:"/login",name:"LoginPage",component:W},{path:"/nearby",name:"NearBy",component:z}]});n.a.config.productionTip=!1;new n.a({el:"#app",router:K,components:{App:i},template:"<App/>"});var Y=f.instance();function J(e){navigator.onLine?Y.pollServer():console.log("offline")}(window.addEventListener("online",J),window.addEventListener("offline",J),window.DBVERSION=1,"indexedDB"in window)?window.indexedDB.open("db",window.DBVERSION).onupgradeneeded=function(e){for(var t=e.target.result,s=[{name:"messagesToSend",details:{keyPath:"time"}},{name:"recentMessages",details:{keyPath:"messageId"}},{name:"offlineUsers",details:{keyPath:"id"}}],n=0;n<s.length;n++)t.objectStoreNames.contains(s[n].name)||t.createObjectStore(s[n].name,s[n].details)}:alert("This browser doesn't support IndexedDB")},QQlh:function(e,t){},Yq37:function(e,t){},kOQf:function(e,t){},kRkP:function(e,t){},oDZh:function(e,t){},pyZx:function(e,t){},"uvX/":function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.b91414bed54de0d52f1f.js.map