webpackJsonp([1],{"8tHC":function(s,e){s.exports="data:image/png;base64,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"},FYXS:function(s,e){},JUeZ:function(s,e){},L6dR:function(s,e){},NHnr:function(s,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=t("7+uW"),a={render:function(){var s=this.$createElement,e=this._self._c||s;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var n=t("VU/8")({name:"App"},a,!1,function(s){t("L6dR")},null,null).exports,r=t("/ocq"),o={render:function(){var s=this.$createElement,e=this._self._c||s;return e("div",{staticClass:"contact-container waves-effect  "},[e("img",{staticClass:"contact-image",attrs:{src:t("8tHC")}}),this._v(" "),e("div",{staticClass:"contact-details"},[e("div",{staticClass:"contact-name"},[this._v(this._s(this.name))]),this._v(" "),e("div",{staticClass:"contact-descr"},[this._v("...")])])])},staticRenderFns:[]};var l=t("VU/8")({name:"Contact",props:["name","id"]},o,!1,function(s){t("JUeZ")},"data-v-c11adf24",null).exports,c=t("mvHQ"),u=t.n(c),g=t("Zrlr"),d=t.n(g),v=t("wxAW"),h=t.n(v),m=function(){function s(e){if(d()(this,s),this.instance=null,!e)throw Error("Illegal Constructor call!");this.data={},this.data.users=[],this.newMessages=[],this.msgArrivedCallback=null}return h()(s,[{key:"getUsers",value:function(){return this.data.users}},{key:"getMessages",value:function(s){return this.data.messages[s]?this.data.messages[s]:{user:"",messages:[]}}},{key:"bindMessages",value:function(s,e){var t=this;$.get({dataType:"json",url:"messages/"+this.msgid(s,this.userId),success:function(s){if(s.ok)for(var i=0;i<s.messages.length;i++)s.messages[i].receive=s.messages[i].sender!=t.userId,e.push(s.messages[i])},error:function(){}})}},{key:"sendMessage",value:function(s,e){var t=this;$.post({dataType:"json",url:"messages/"+this.msgid(s,this.userId),contentType:"application/json; charset=utf-8",data:u()({msg:{txt:e,sender:this.userId}}),success:function(){},error:function(){var i=localStorage.unsent||"[]";(i=JSON.parse(i)).push({msgId:t.msgid(s,t.userId),txt:e,sender:t.userId}),localStorage.unsent=u()(i),navigator.serviceWorker.ready.then(function(s){return s.sync.register("syncMessages")})}})}},{key:"msgid",value:function(s,e){return s<e?s+"_"+e:e+"_"+s}},{key:"bindUsers",value:function(s){var e=this;$.get({dataType:"json",url:"users",success:function(t){for(var i in e.users=t,t)s.push({id:i,name:t[i].user})}})}},{key:"logIn",value:function(s,e,t){var i=this;this.userName=s,$.post({dataType:"json",url:"auth/login",data:{user:s,pass:e},success:function(s){i.userId=s.id,i.logged=!0,t(),i.pollActive=!0,i.pollServer()},error:function(){i.userName=null}}),this.logged=!0}},{key:"signUp",value:function(s,e,t){this.userName=s;var i=this;$.post({dataType:"json",url:"auth/register",data:{user:s,pass:e},success:function(){i.logged=!0,t()},error:function(){i.userName=null}})}},{key:"logOut",value:function(){this.logged=!1}},{key:"loggedIn",value:function(){return!("undefined"==typeof dev||!dev)||this.logged}},{key:"getUserNameById",value:function(s){if(this.users&&this.users[s])return this.users[s].user}},{key:"pollServer",value:function(){var s=this;this.pollActive&&window.setTimeout(function(){$.ajax({url:"messages/polling/"+s.userId,method:"GET",success:function(e){e&&e.sender&&e.txt&&e.sender!=s.userId&&s.messageArrived(e),s.pollServer()},error:function(){s.pollServer()}})},10)}},{key:"messageArrived",value:function(s){this.msgArrivedCallback&&this.msgArrivedCallback(s)}},{key:"subscribe",value:function(s){this.msgArrivedCallback=s}},{key:"getUserName",value:function(){return this.userName||""}}],[{key:"instance",value:function(){return s.inst||(s.inst=new s(!0)),s.inst}}]),s}(),A=m.instance(),f={name:"Users",components:{Contact:l},data:function(){return{searchFilter:"",users:[]}},mounted:function(){A.bindUsers(this.users)},methods:{userSelected:function(s){this.$emit("userSelected",s)}},computed:{filteredUsers:function(){var s=this.searchFilter;return this.users.filter(function(e){return 0===e.name.indexOf(s)})}}},p={render:function(){var s=this,e=s.$createElement,t=s._self._c||e;return t("div",[t("div",{staticClass:"search-container"},[t("input",{directives:[{name:"model",rawName:"v-model",value:s.searchFilter,expression:"searchFilter"}],staticClass:"form-control mr-sm-2 waves-effect",attrs:{type:"text",placeholder:"Search","aria-label":"Search"},domProps:{value:s.searchFilter},on:{input:function(e){e.target.composing||(s.searchFilter=e.target.value)}}})]),s._v(" "),s._l(s.filteredUsers,function(e){return t("div",[t("Contact",{attrs:{name:e.name,id:e.id},nativeOn:{click:function(t){s.userSelected(e.id)}}})],1)})],2)},staticRenderFns:[]};var C=t("VU/8")(f,p,!1,function(s){t("WIUC")},"data-v-3f4a5c5a",null).exports,w={render:function(){var s=this,e=s.$createElement,t=s._self._c||e;return t("div",{staticClass:"message-item-conatainer"},[s.message.receive?t("div",{staticClass:"message-item incoming-message-item "},[s._v(s._s(s.message.txt))]):s._e(),s._v(" "),s.message.receive?s._e():t("div",{staticClass:"message-item outgoing-message-item"},[s._v(s._s(s.message.txt))])])},staticRenderFns:[]};var U=t("VU/8")({name:"Message",props:["message"]},w,!1,function(s){t("FYXS")},"data-v-519f652e",null).exports,b=m.instance(),B={name:"ChatWall",components:{Message:U},data:function(){return{messages:[],user:null,userId:null}},methods:{showMessages:function(s){this.userId=s,this.messages=[],this.user=b.getUserNameById(s),b.bindMessages(s,this.messages)},txtTyped:function(s){if(13==s.keyCode&&"Enter"==s.key){if(s.shiftKey)return;var e=this.$refs.txtinput.textContent;if(this.$refs.txtinput.textContent="",""===e.trim())return;this.messages.push({receive:0,time:(new Date).toISOString(),txt:e}),this.scrolldown(),b.sendMessage(this.userId,e)}},msgArrived:function(s){this.messages.push(s),this.scrolldown()},scrolldown:function(){setTimeout(function(){var s=document.getElementById("messages-container");s.scrollTop=s.scrollHeight},200)}},created:function(){this.scrolldown()}},y={render:function(){var s=this,e=s.$createElement,t=s._self._c||e;return t("div",{staticClass:"chat-wall"},[t("div",{staticClass:"user-header"},[s._v("\n    "+s._s(s.user)+"\n  ")]),s._v(" "),t("div",{staticClass:"messages-container scrollbar scrollbar-primary",attrs:{id:"messages-container"}},[s._l(s.messages,function(e){return null!=s.user?t("div",[t("Message",{attrs:{message:e}})],1):s._e()}),s._v(" "),null==s.user?t("div",[t("div",{staticClass:"emptychatwall"},[s._v("Válasszon Felhasználót")])]):s._e()],2),s._v(" "),t("div",{staticClass:"message-input-container"},[t("div",{ref:"txtinput",staticClass:"msg-input scrollbar scrollbar-primary",attrs:{contenteditable:"true",placeholder:"Enter text here..."},on:{keyup:s.txtTyped}}),s._v(" "),t("div",{staticClass:"msg-icons"})])])},staticRenderFns:[]};var I=t("VU/8")(B,y,!1,function(s){t("hXjy")},"data-v-9f279884",null).exports,k=m.instance(),Q={components:{ChatWall:I,Users:C},data:function(){return{back:!1,currentUserId:!1,userName:""}},methods:{updateChatWall:function(s){this.currentUserId=s,this.$refs.cw.showMessages(s),window.matchMedia("screen and (max-width: 728px)").matches?this.mobileShowChat():(this.backVisible(!1),$("#chatwall").is(":visible")||$("#chatwall").show())},mobileShowChat:function(){$("#userswall").hide(),$("#chatwall").hide().show("slide",{direction:"right"},500),this.backVisible(!0)},mobileShowUsers:function(){$("#chatwall").hide(),$("#userswall").show("slide",{direction:"left"},500),this.backVisible(!1)},backClicked:function(){this.mobileShowUsers()},backVisible:function(s){this.back=s},msgArrived:function(s){s.sender==this.currentUserId&&(s.receive=1,this.$refs.cw.msgArrived(s))}},created:function(){k.loggedIn()||this.$router.push("login"),this.userName=k.getUserName(),k.subscribe(this.msgArrived)}},x={render:function(){var s=this,e=s.$createElement,t=s._self._c||e;return t("div",{staticClass:"onepage"},[t("nav",{staticClass:"navbar navbar-expand-lg navbar-dark primary-color"},[s.back?t("div",{staticClass:"back-img",on:{click:s.backClicked}},[s._v(" ")]):s._e(),s._v(" "),t("a",{staticClass:"navbar-brand",attrs:{href:"#"}},[s._v("PWA - CHAT")]),s._v(" "),t("a",{staticClass:"nav-item whitecolor",attrs:{href:"#"}},[s._v(s._s(s.userName))])]),s._v(" "),t("div",{staticClass:"home-container"},[t("div",{staticClass:"left-side scrollbar scrollbar-primary",attrs:{id:"userswall"}},[t("users",{on:{userSelected:s.updateChatWall}})],1),s._v(" "),t("div",{staticClass:"right-side",attrs:{id:"chatwall"}},[t("chat-wall",{ref:"cw"})],1)])])},staticRenderFns:[]};var _=t("VU/8")(Q,x,!1,function(s){t("vZST")},"data-v-6b99b8a2",null).exports,E=m.instance(),F={name:"Login",data:{loginUser:"",loginPass:"",signupUser:"",signupPass:"",signupPassAgain:""},methods:{login:function(){E.logIn(this.loginUser,this.loginPass,this.back)},signup:function(){this.signupPassAgain==this.signupPass?E.signUp(this.signupUser,this.signupPass,this.back):alert("A két jelszó nem egyezik!")},switchLogin:function(){$("#login").is(":visible")?($("#login").hide(),$("#signup").show()):($("#signup").hide(),$("#login").show())},back:function(){this.$router.go(-1)}}},N={render:function(){var s=this,e=s.$createElement,t=s._self._c||e;return t("div",{staticClass:"login-container"},[t("div",{staticClass:"card mx-xl-5",attrs:{id:"login"}},[t("div",{staticClass:"card-body"},[s._m(0),s._v(" "),t("label",{staticClass:"grey-text font-weight-light"},[s._v("Your Name")]),s._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:s.loginUser,expression:"loginUser"}],staticClass:"form-control",attrs:{type:"text",id:"loginUser"},domProps:{value:s.loginUser},on:{input:function(e){e.target.composing||(s.loginUser=e.target.value)}}}),s._v(" "),t("br"),s._v(" "),t("label",{staticClass:"grey-text font-weight-light"},[s._v("Your password")]),s._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:s.loginPass,expression:"loginPass"}],staticClass:"form-control",attrs:{type:"password",id:"loginPass"},domProps:{value:s.loginPass},on:{input:function(e){e.target.composing||(s.loginPass=e.target.value)}}}),s._v(" "),t("div",{staticClass:"text-center mt-4"},[t("button",{staticClass:"btn btn-primary waves-effect waves-light",on:{click:s.login}},[s._v("Login")])])]),s._v(" "),t("div",{staticClass:"modal-footer"},[t("div",{staticClass:"options font-weight-light"},[t("p",[s._v("Not a member? "),t("span",{staticClass:"switchLogin",on:{click:s.switchLogin}},[s._v("Sign Up")])])])])]),s._v(" "),t("div",{staticClass:"card mx-xl-5",attrs:{id:"signup"}},[t("div",{staticClass:"card-body"},[s._m(1),s._v(" "),t("label",{staticClass:"grey-text font-weight-light"},[s._v("Your Name")]),s._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:s.signupUser,expression:"signupUser"}],staticClass:"form-control",attrs:{type:"text",id:"signupUser"},domProps:{value:s.signupUser},on:{input:function(e){e.target.composing||(s.signupUser=e.target.value)}}}),s._v(" "),t("br"),s._v(" "),t("label",{staticClass:"grey-text font-weight-light"},[s._v("Your password")]),s._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:s.signupPass,expression:"signupPass"}],staticClass:"form-control",attrs:{type:"password",id:"signupPass"},domProps:{value:s.signupPass},on:{input:function(e){e.target.composing||(s.signupPass=e.target.value)}}}),s._v(" "),t("br"),s._v(" "),t("label",{staticClass:"grey-text font-weight-light"},[s._v("Your password again")]),s._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:s.signupPassAgain,expression:"signupPassAgain"}],staticClass:"form-control",attrs:{type:"password",id:"signupPassAgain"},domProps:{value:s.signupPassAgain},on:{input:function(e){e.target.composing||(s.signupPassAgain=e.target.value)}}}),s._v(" "),t("div",{staticClass:"text-center mt-4"},[t("button",{staticClass:"btn btn-primary waves-effect waves-light",on:{click:s.signup}},[s._v("Login")])])]),s._v(" "),t("div",{staticClass:"modal-footer"},[t("div",{staticClass:"options font-weight-light"},[t("p",[s._v("Already a member? "),t("span",{staticClass:"switchLogin",on:{click:s.switchLogin}},[s._v("Login")])])])])])])},staticRenderFns:[function(){var s=this.$createElement,e=this._self._c||s;return e("div",{staticClass:"form-header login-label rounded"},[e("h3",[this._v("Login:")])])},function(){var s=this.$createElement,e=this._self._c||s;return e("div",{staticClass:"form-header login-label rounded"},[e("h3",[this._v("Sign Up:")])])}]};var S=t("VU/8")(F,N,!1,function(s){t("Uw32")},"data-v-b0d5176a",null).exports;i.a.use(r.a);var P=new r.a({routes:[{path:"/",name:"HomePage",component:_},{path:"/login",name:"LoginPage",component:S}]});i.a.config.productionTip=!1,new i.a({el:"#app",router:P,components:{App:n},template:"<App/>"})},Uw32:function(s,e){},WIUC:function(s,e){},hXjy:function(s,e){},vZST:function(s,e){}},["NHnr"]);
//# sourceMappingURL=app.26bfb71c3e824113ec98.js.map